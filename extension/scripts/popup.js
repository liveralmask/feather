//alert( "popup" );var bg = chrome.extension.getBackgroundPage();var type_eval = document.getElementById( "type-eval" );type_eval.checked = true;var result = document.getElementById( "result" );var popup = popup || {};(function( action ){  action.create_element = function( name, attributes, values ){    var element = document.createElement( name );    var attributes_keys = Object.keys( attributes );    var attributes_len = attributes_keys.length;    for ( var i = 0; i < attributes_len; ++i ){      var key = attributes_keys[ i ];            element.setAttribute( key, attributes[ key ] );    }    if ( "text" in values ) element.textContent = values.text;    if ( "html" in values ) element.innerHTML = values.html;    return element;  };    action.clear_result = function(){    while ( result.firstChild ){      result.removeChild( result.firstChild );    }  };    action.set_result = function( html ){    result.innerHTML = html;  };    action.eval = function(){    bg.eval( document.getElementById( "code" ).value, function( errmsg ){      result.appendChild( action.create_element( "font", { "style" : "color:red" }, { "text" : errmsg } ) );    } );  };    action.xpath = function(){    bg.xpath( document.getElementById( "code" ).value );  };})(popup.action = popup.action || {});document.getElementById( "execute" ).onclick = function(){  popup.action.clear_result();    var types = document.getElementsByName( "type" );  var types_len = types.length;  for ( var i = 0; i < types_len; ++i ){    var type = types[ i ];        if ( type.checked ){      popup.action[ type.value ]();      break;    }  }};